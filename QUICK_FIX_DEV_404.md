# ä¿®å¤å¼€å‘æ¨¡å¼ 404 é”™è¯¯

## é—®é¢˜æè¿°
```
GET / 404 in 2.6s
Cross origin request detected from 10.43.22.57 to /_next/*
```

## é—®é¢˜åŸå› 

1. **Next.js 16 è·¨åŸŸé™åˆ¶** - é»˜è®¤ä¸å…è®¸è¿œç¨‹è®¿é—®å¼€å‘æœåŠ¡å™¨
2. **ç›‘å¬åœ°å€é”™è¯¯** - å¼€å‘æœåŠ¡å™¨é»˜è®¤åªç›‘å¬ localhostï¼Œä¸ç›‘å¬ 0.0.0.0
3. **é…ç½®æœªç”Ÿæ•ˆ** - ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨

---

## âœ… ç«‹å³ä¿®å¤ï¼ˆ3ç§æ–¹æ³•ï¼‰

### æ–¹æ³• 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)

# å¼€å‘æ¨¡å¼
./start-dev.sh

# æˆ–ç”Ÿäº§æ¨¡å¼
./start-prod.sh
```

### æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨ï¼ˆç›‘å¬æ‰€æœ‰æ¥å£ï¼‰

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)

# å¼€å‘æ¨¡å¼ - ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
HOSTNAME=0.0.0.0 PORT=3000 npm run dev

# æˆ–ç”Ÿäº§æ¨¡å¼
HOSTNAME=0.0.0.0 PORT=3000 npm start
```

### æ–¹æ³• 3: ä¿®æ”¹ package.json

ç¼–è¾‘ `package.json`ï¼Œæ·»åŠ å¯åŠ¨è„šæœ¬ï¼š

```json
{
  "scripts": {
    "dev": "next dev -H 0.0.0.0",
    "dev:local": "next dev",
    "build": "next build",
    "start": "next start -H 0.0.0.0",
    "start:local": "next start"
  }
}
```

ç„¶åè¿è¡Œï¼š
```bash
npm run dev
```

---

## ğŸ” éªŒè¯ä¿®å¤

### 1. æœ¬åœ°æµ‹è¯•
```bash
curl http://localhost:3000/api/health
```

### 2. è¿œç¨‹æµ‹è¯•
```bash
# ä»å…¶ä»–æœºå™¨æµ‹è¯•
curl http://your-server-ip:3000/api/health

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®
http://your-server-ip:3000
```

### 3. æ£€æŸ¥ç›‘å¬åœ°å€
```bash
# åº”è¯¥çœ‹åˆ° 0.0.0.0:3000 è€Œä¸æ˜¯ 127.0.0.1:3000
lsof -i :3000
```

---

## ğŸ› ï¸ é…ç½®è¯´æ˜

### next.config.ts å·²æ›´æ–°

å·²æ·»åŠ  `allowedDevOrigins` é…ç½®ï¼š

```typescript
turbopack: {
  allowedDevOrigins: [
    'http://10.43.22.57:*',
    'http://localhost:*',
    'http://127.0.0.1:*',
  ],
}
```

**é‡è¦**: ä¿®æ”¹é…ç½®åå¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨ï¼

---

## ğŸ“‹ å®Œæ•´å¯åŠ¨æµç¨‹

### å¼€å‘æ¨¡å¼

```bash
# 1. åœæ­¢å½“å‰æœåŠ¡å™¨
# æŒ‰ Ctrl+C

# 2. æ¸…ç†ç¼“å­˜ï¼ˆå¯é€‰ä½†æ¨èï¼‰
rm -rf .next

# 3. å¯åŠ¨æœåŠ¡å™¨
./start-dev.sh

# 4. ç­‰å¾…å¯åŠ¨å®Œæˆ
# çœ‹åˆ°æ¶ˆæ¯: âœ“ Ready in Xms

# 5. è®¿é—®åº”ç”¨
# æœ¬æœº: http://localhost:3000
# è¿œç¨‹: http://your-ip:3000
```

### ç”Ÿäº§æ¨¡å¼

```bash
# 1. æ„å»ºåº”ç”¨
npm run build

# 2. å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
./start-prod.sh

# 3. è®¿é—®åº”ç”¨
http://your-ip:3000
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: ä»ç„¶æ˜¾ç¤º 404ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

```bash
# 1. ç¡®è®¤é¡µé¢æ–‡ä»¶å­˜åœ¨
ls -la src/app/page.tsx

# 2. æ¸…ç†ç¼“å­˜å¹¶é‡å¯
rm -rf .next
./start-dev.sh

# 3. æ£€æŸ¥é”™è¯¯æ—¥å¿—
# æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
```

### Q2: è·¨åŸŸè­¦å‘Šä»ç„¶å­˜åœ¨ï¼Ÿ

**A**: 
1. ç¡®è®¤ `next.config.ts` å·²æ›´æ–°
2. å®Œå…¨åœæ­¢æœåŠ¡å™¨ï¼ˆCtrl+Cï¼‰
3. é‡æ–°å¯åŠ¨

### Q3: è¿œç¨‹æ— æ³•è®¿é—®ï¼Ÿ

**A**: æ£€æŸ¥é˜²ç«å¢™ï¼š

```bash
# Ubuntu/Debian
sudo ufw allow 3000

# CentOS/RHEL
sudo firewall-cmd --add-port=3000/tcp --permanent
sudo firewall-cmd --reload

# æˆ–ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•
sudo ufw disable
```

### Q4: ç«¯å£è¢«å ç”¨ï¼Ÿ

**A**: æŸ¥æ‰¾å¹¶å…³é—­å ç”¨è¿›ç¨‹ï¼š

```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :3000

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
PORT=3001 ./start-dev.sh
```

---

## ğŸ“Š ç½‘ç»œé…ç½®

### å…è®¸æ‰€æœ‰æ¥æºè®¿é—®ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

å¦‚æœ `allowedDevOrigins` ä¸å¤Ÿçµæ´»ï¼Œå¯ä»¥åœ¨å¼€å‘ç¯å¢ƒç¦ç”¨æºæ£€æŸ¥ï¼š

```typescript
// next.config.ts
turbopack: {
  // å¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰æ¥æºï¼ˆä»…ç”¨äºå¼€å‘ï¼ï¼‰
  ...(process.env.NODE_ENV === 'development' && {
    allowedDevOrigins: true,
  }),
}
```

**âš ï¸ è­¦å‘Š**: ä»…åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»é™åˆ¶å…·ä½“åŸŸåï¼

---

## âœ… æˆåŠŸæ ‡å¿—

å¯åŠ¨æˆåŠŸåï¼Œç»ˆç«¯åº”è¯¥æ˜¾ç¤ºï¼š

```
âœ“ Ready in 2.3s
â—‹ Local:        http://localhost:3000
â—‹ Network:      http://192.168.x.x:3000
```

ç„¶åï¼š
- âœ… æœ¬æœºè®¿é—® http://localhost:3000 æ­£å¸¸
- âœ… è¿œç¨‹è®¿é—® http://your-ip:3000 æ­£å¸¸
- âœ… æ—  404 é”™è¯¯
- âœ… æ— è·¨åŸŸè­¦å‘Š

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# å¼€å‘æ¨¡å¼
./start-dev.sh                    # ä½¿ç”¨è„šæœ¬
HOSTNAME=0.0.0.0 npm run dev      # æ‰‹åŠ¨å¯åŠ¨

# ç”Ÿäº§æ¨¡å¼
./start-prod.sh                   # ä½¿ç”¨è„šæœ¬
HOSTNAME=0.0.0.0 npm start        # æ‰‹åŠ¨å¯åŠ¨

# è¯Šæ–­
lsof -i :3000                     # æ£€æŸ¥ç«¯å£
curl http://localhost:3000        # æµ‹è¯•è¿æ¥
rm -rf .next                      # æ¸…ç†ç¼“å­˜

# æŸ¥çœ‹æ—¥å¿—
# ç»ˆç«¯ç›´æ¥æŸ¥çœ‹è¾“å‡º
```

---

æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ï¼Œ404 é—®é¢˜åº”è¯¥å¯ä»¥è§£å†³ï¼ğŸ‰
